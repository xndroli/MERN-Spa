(this["webpackJsonpmern-client"]=this["webpackJsonpmern-client"]||[]).push([[0],{78:function(t,e,c){},79:function(t,e,c){},81:function(t,e,c){},85:function(t,e,c){},86:function(t,e,c){"use strict";c.r(e);var n=c(2),a=c.n(n),s=c(63),r=c.n(s),i=(c(78),c(6)),o=c(12),l=c(5),j=c(67),d=c(97),u=c(99),b=c(96),O=c(65),h=(c(79),c(0));var p=function(){return Object(h.jsxs)("div",{className:"jumbotron",children:[Object(h.jsxs)("div",{className:"jumbotron-cta",children:[Object(h.jsx)("h2",{children:"Welcome to the MERN Spa!"}),Object(h.jsx)("p",{children:"Have a look around to see what we're about"})]}),Object(h.jsx)("div",{className:"jumbotron-form"})]})},m=c(13),x=c(8);function v(t,e){return 1===e?t:t+"s"}function f(t,e,c){return new Promise((function(n,a){var s,r,i,o=window.indexedDB.open("shop-shop",1);o.onupgradeneeded=function(t){var e=o.result;e.createObjectStore("products",{keyPath:"_id"}),e.createObjectStore("services",{keyPath:"_id"}),e.createObjectStore("categories",{keyPath:"_id"}),e.createObjectStore("cart",{keyPath:"_id"})},o.onerror=function(t){console.log("There was an error")},o.onsuccess=function(a){switch(s=o.result,r=s.transaction(t,"readwrite"),i=r.objectStore(t),s.onerror=function(t){console.log("error",t)},e){case"put":i.put(c),n(c);break;case"get":var l=i.getAll();l.onsuccess=function(){n(l.result)};break;case"delete":i.delete(c._id);break;default:console.log("No valid method")}r.oncomplete=function(){s.close()}}}))}var g=function(){var t=Object(n.useState)({name:"",email:"",message:""}),e=Object(x.a)(t,2),c=e[0],a=e[1],s=Object(n.useState)(""),r=Object(x.a)(s,2),o=r[0],l=r[1],j=c.name,d=c.email,u=c.message,b=function(t){if("email"===t.target.name){var e=function(t){return/^(([^<>()[\]\\.,;:\s@"]+(\.[^<>()[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(String(t).toLowerCase())}(t.target.value);l(e?"":"Your email is invalid.")}else t.target.value.length?l(""):l("".concat(t.target.name," is required."));o||(a(Object(i.a)(Object(i.a)({},c),{},Object(m.a)({},t.target.name,t.target.value))),console.log("Handle Form",c))};return Object(h.jsxs)("section",{className:"form",children:[Object(h.jsx)("h2",{"data-testid":"h1tag",className:"section-title",children:"Reach Out"}),Object(h.jsxs)("form",{id:"contact-form",onSubmit:function(t){t.preventDefault(),o||console.log("Submit Form",c)},children:[Object(h.jsx)("div",{children:Object(h.jsx)("h4",{className:"form-header",children:"Send us a message!"})}),Object(h.jsxs)("div",{className:"text-input",children:[Object(h.jsx)("label",{className:"text-label",htmlFor:"name",children:"Name:"}),Object(h.jsx)("input",{className:"text-input",type:"text",name:"name",defaultValue:j,onBlur:b})]}),Object(h.jsxs)("div",{className:"text-input",children:[Object(h.jsx)("label",{className:"text-label",htmlFor:"email",children:"Email:"}),Object(h.jsx)("input",{className:"text-input",type:"email",name:"email",defaultValue:d,onBlur:b})]}),Object(h.jsxs)("div",{className:"text-input",children:[Object(h.jsx)("label",{className:"text-label",htmlFor:"message",children:"Message:"}),Object(h.jsx)("textarea",{className:"text-input",name:"message",rows:"2",defaultValue:u,onBlur:b})]}),o&&Object(h.jsx)("div",{children:Object(h.jsx)("p",{className:"error-text",children:o})}),Object(h.jsx)("button",{"data-testid":"button",type:"submit",children:"Submit"})]})]})},y=(c(81),function(){var t=0;return function e(){var c,n=document.getElementsByClassName("Containers");for(c=0;c<n.length;c++)n[c].style.display="none",n[t-1].style.display="block";++t>n.length&&(t=1);setTimeout(e,3500)}(),Object(h.jsx)("div",{children:Object(h.jsxs)("div",{children:[Object(h.jsxs)("div",{className:"slideshow-container fade",children:[Object(h.jsx)("div",{className:"Containers",children:Object(h.jsxs)(o.b,{to:"/services",children:[Object(h.jsx)("img",{src:"../Images/mongoosemassage.jpg",style:{width:"100%"},alt:"mongoose massage"}),Object(h.jsx)("div",{className:"Info",children:"Mongoose Massage"})]})}),Object(h.jsx)("div",{className:"Containers",children:Object(h.jsxs)(o.b,{to:"/services",children:[Object(h.jsx)("img",{src:"../Images/expresseyebrowwax.jpg",style:{width:"100%"},alt:"express eyebrow wax"}),Object(h.jsx)("div",{className:"Info",children:"Express Eyebrow Wax"})]})}),Object(h.jsx)("div",{className:"Containers",children:Object(h.jsxs)(o.b,{to:"/services",children:[Object(h.jsx)("img",{src:"../Images/reactfacial.jpg",style:{width:"100%"},alt:"react facial"}),Object(h.jsx)("div",{className:"Info",children:"React Facial"})]})})]}),Object(h.jsx)("br",{})]})})}),N=function(){return Object(h.jsxs)("main",{children:[Object(h.jsx)("div",{className:"jumbotron",children:Object(h.jsx)(p,{})}),Object(h.jsxs)("div",{className:"intro",children:[Object(h.jsx)("h2",{className:"section-title",children:"Our Philosophy"}),Object(h.jsx)("p",{children:"Our belief is that there's no stack better than the MERN stack, and we have the services to prove it. Check out our services below to get an idea of what we offer. Also remember to view our products to work out the knots in your app."})]}),Object(h.jsxs)("div",{className:"slideshow",children:[Object(h.jsx)("h2",{className:"section-title",children:"Our Services"}),Object(h.jsx)(y,{})]}),Object(h.jsxs)("footer",{className:"footer",children:[Object(h.jsx)(g,{}),Object(h.jsx)("div",{className:"footer-title",children:Object(h.jsx)("h4",{children:"Brought to you by the good folks at MERN Spa"})})]})]})},w=c(68),_=c(16),k="UPDATE_PRODUCTS",S="UPDATE_SERVICES",C="ADD_TO_CART",E="ADD_MULTIPLE_TO_CART",I="REMOVE_FROM_CART",T="UPDATE_CART_QUANTITY",Q="TOGGLE_CART",$=function(t){return{state:t}},A=function(t,e){switch(e.type){case k:return Object(i.a)(Object(i.a)({},t),{},{products:Object(_.a)(e.products)});case S:return console.log("action",e),Object(i.a)(Object(i.a)({},t),{},{services:Object(_.a)(e.services)});case C:return Object(i.a)(Object(i.a)({},t),{},{cartOpen:!0,cart:[].concat(Object(_.a)(t.cart),[e.products,e.services])});case E:return Object(i.a)(Object(i.a)({},t),{},{cart:Object(_.a)(e.products)});case T:return Object(i.a)(Object(i.a)({},t),{},{cartOpen:!0,cart:t.cart.map((function(t){return e._id===t._id&&(t.purchaseQuantity=e.purchaseQuantity),t}),(function(t){return e._id===t._id&&(t.purchaseQuantity=e.purchaseQuantity),t}))});case I:var c=t.cart.filter((function(t){return t._id!==e._id}),(function(t){return t._id!==e._id}));return Object(i.a)(Object(i.a)({},t),{},{cartOpen:c.length>0,cart:c});case"CLEAR_CART":return Object(i.a)(Object(i.a)({},t),{},{cartOpen:!1,cart:[]});case Q:return Object(i.a)(Object(i.a)({},t),{},{cartOpen:!t.cartOpen});case"UPDATE_CATEGORIES":return Object(i.a)(Object(i.a)({},t),{},{categories:Object(_.a)(e.categories)});case"UPDATE_CURRENT_CATEGORY":return Object(i.a)(Object(i.a)({},t),{},{currentCategory:e.currentCategory});default:return $(t)}};var D=["value"],P=Object(n.createContext)(),R=P.Provider,F=function(t){t.value;var e,c=Object(w.a)(t,D),a=(e={products:[],services:[],cart:[],cartOpen:!1,categories:[],currentCategory:""},Object(n.useReducer)(A,e,$)),s=Object(x.a)(a,2),r=s[0],o=s[1];return Object(h.jsx)(R,Object(i.a)({value:[r,o]},c))},q=function(){return Object(n.useContext)(P)};var U,B,L,M,W,V,Y,G=function(t){var e=q(),c=Object(x.a)(e,2),n=c[0],a=c[1],s=t.image,r=t.name,l=t._id,j=t.price,d=t.quantity,u=n.cart;return Object(h.jsxs)("div",{className:"card px-1 py-1",children:[Object(h.jsxs)(o.b,{to:"/products/".concat(l),children:[Object(h.jsx)("img",{alt:r,src:"/images/".concat(s)}),Object(h.jsx)("p",{children:r})]}),Object(h.jsxs)("div",{className:"card-info",children:[Object(h.jsxs)("div",{children:[d," ",v("item",d)," in stock"]}),Object(h.jsxs)("span",{children:["$",j]})]}),Object(h.jsx)("div",{className:"card-btn",children:Object(h.jsx)("button",{onClick:function(){var e=u.find((function(t){return t._id===l}));e?(a({type:T,_id:l,purchaseQuantity:parseInt(e.purchaseQuantity)+1}),f("cart","put",Object(i.a)(Object(i.a)({},e),{},{purchaseQuantity:parseInt(e.purchaseQuantity)+1}))):(a({type:C,product:Object(i.a)(Object(i.a)({},t),{},{purchaseQuantity:1})}),f("cart","put",Object(i.a)(Object(i.a)({},t),{},{purchaseQuantity:1})))},children:"Add to cart"})})]})},H=c(69),z=c(21),J=c(98),Z=Object(J.a)(U||(U=Object(z.a)(["\n\tquery getProducts($category: ID) {\n\t\tproducts(category: $category) {\n\t\t\t_id\n\t\t\tname\n\t\t\tdescription\n\t\t\tprice\n\t\t\tquantity\n\t\t\timage\n\t\t\tcategory {\n\t\t\t\t_id\n\t\t\t}\n\t\t}\n\t}\n"]))),K=Object(J.a)(B||(B=Object(z.a)(["\n\tquery getServices($category: ID) {\n\t\tservices(category: $category) {\n\t\t\t_id\n\t\t\tname\n\t\t\tdescription\n\t\t\tprice\n\t\t\tquantity\n\t\t\timage\n\t\t\tcategory {\n\t\t\t\t_id\n\t\t\t}\n\t\t}\n\t}\n"]))),X=Object(J.a)(L||(L=Object(z.a)(["\n\tquery getCheckout($products: [ID]!, $services: [ID]!) {\n\t\tcheckout(products: $products, services: $services) {\n\t\t\tsession\n\t\t}\n\t}\n"]))),tt=(Object(J.a)(M||(M=Object(z.a)(["\n\t{\n\t\tproducts {\n\t\t\t_id\n\t\t\tname\n\t\t\tdescription\n\t\t\tprice\n\t\t\tquantity\n\t\t\tcategory {\n\t\t\t\tname\n\t\t\t}\n\t\t}\n\t}\n"]))),Object(J.a)(W||(W=Object(z.a)(["\n\t{\n\t\tservices {\n\t\t\t_id\n\t\t\tname\n\t\t\tdescription\n\t\t\tprice\n\t\t\tquantity\n\t\t\tcategory {\n\t\t\t\tname\n\t\t\t}\n\t\t}\n\t}\n"]))),Object(J.a)(V||(V=Object(z.a)(["\n\t{\n\t\tcategories {\n\t\t\t_id\n\t\t\tname\n\t\t}\n\t}\n"]))),Object(J.a)(Y||(Y=Object(z.a)(["\n\t{\n\t\tuser {\n\t\t\tfirstName\n\t\t\tusername\n\t\t\torders {\n\t\t\t\t_id\n\t\t\t\tpurchaseDate\n\t\t\t\tproducts {\n\t\t\t\t\t_id\n\t\t\t\t\tname\n\t\t\t\t\tdescription\n\t\t\t\t\tprice\n\t\t\t\t\tquantity\n\t\t\t\t\timage\n\t\t\t\t}\n\t\t\t\tservices {\n\t\t\t\t\t_id\n\t\t\t\t\tname\n\t\t\t\t\tdescription\n\t\t\t\t\tprice\n\t\t\t\t\tquantity\n\t\t\t\t\timage\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n"])))),et=c.p+"static/media/spinner.689d9a07.gif";var ct=function(){var t=q(),e=Object(x.a)(t,2),c=e[0],a=e[1],s=c.currentCategory,r=Object(H.b)(Z),i=r.loading,o=r.data;return Object(n.useEffect)((function(){o?(a({type:k,products:o.products}),o.products.forEach((function(t){f("products","put",t)}))):i||f("products","get").then((function(t){a({type:k,products:t})}))}),[o,i,a]),Object(h.jsxs)("div",{className:"detailedView",children:[Object(h.jsx)("h2",{className:"section-title",children:"Our Products:"}),c.products?Object(h.jsx)("div",{className:"flex-row",children:(s?c.products.filter((function(t){return t.category._id===s})):c.products).map((function(t){return Object(h.jsx)(G,{_id:t._id,image:t.image,name:t.name,price:t.price,quantity:t.quantity},t._id)}))}):Object(h.jsx)("h3",{children:"You haven't added any products yet!"}),i?Object(h.jsx)("img",{src:et,alt:"loading"}):null]})},nt=c(9),at=c(14),st=c(64),rt=c(93),it=function(t){var e=t.item,c=q(),n=Object(x.a)(c,2)[1];return Object(h.jsxs)("div",{className:"flex-row",children:[Object(h.jsx)("div",{children:Object(h.jsx)("img",{src:"/images/".concat(e.image),alt:""})}),Object(h.jsxs)("div",{children:[Object(h.jsxs)("div",{children:[e.name,", $",e.price]}),Object(h.jsxs)("div",{children:[Object(h.jsx)("span",{children:"Qty:"}),Object(h.jsx)("input",{type:"number",placeholder:"1",value:e.purchaseQuantity,onChange:function(t){var c=t.target.value;"0"===c?(n({type:I,_id:e._id}),f("cart","delete",Object(i.a)({},e))):(n({type:T,_id:e._id,purchaseQuantity:parseInt(c)}),f("cart","put",Object(i.a)(Object(i.a)({},e),{},{purchaseQuantity:parseInt(c)})))}}),Object(h.jsx)("span",{role:"img","aria-label":"trash",onClick:function(){return function(t){n({type:I,_id:t._id}),f("cart","delete",Object(i.a)({},t))}(e)},children:"\ud83d\uddd1\ufe0f"})]})]})]})},ot=c(28),lt=c(27),jt=c(54),dt=c.n(jt),ut=new(function(){function t(){Object(ot.a)(this,t)}return Object(lt.a)(t,[{key:"getProfile",value:function(){return dt()(this.getToken())}},{key:"loggedIn",value:function(){var t=this.getToken();return!!t&&!this.isTokenExpired(t)}},{key:"isTokenExpired",value:function(t){try{return dt()(t).exp<Date.now()/1e3}catch(e){return!1}}},{key:"getToken",value:function(){return localStorage.getItem("id_token")}},{key:"login",value:function(t){localStorage.setItem("id_token",t),window.location.assign("/")}},{key:"logout",value:function(){localStorage.removeItem("id_token"),window.location.assign("/")}}]),t}()),bt=(c(85),Object(st.a)("pk_test_TYooMQauvdEDq54NiTphI7jx")),Ot=function(){var t=q(),e=Object(x.a)(t,2),c=e[0],a=e[1],s=Object(rt.a)(X),r=Object(x.a)(s,2),i=r[0],o=r[1].data;function l(){a({type:Q})}return Object(n.useEffect)((function(){o&&bt.then((function(t){t.redirectToCheckout({sessionId:o.checkout.session})}))}),[o]),Object(n.useEffect)((function(){function t(){return(t=Object(at.a)(Object(nt.a)().mark((function t(){var e;return Object(nt.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,f("cart","get");case 2:e=t.sent,a({type:E,products:Object(_.a)(e)});case 4:case"end":return t.stop()}}),t)})))).apply(this,arguments)}console.log("inside cart useEffect"),c.cart||function(){t.apply(this,arguments)}()}),[c.cart,a]),c.cartOpen?(console.log("state cart",c.cart),Object(h.jsxs)("div",{className:"cart",children:[Object(h.jsx)("div",{className:"close",onClick:l,children:"[close]"}),Object(h.jsx)("h2",{children:"Shopping Cart"}),c.cart?Object(h.jsxs)("div",{children:[c.cart.map((function(t){return Object(h.jsx)(it,{item:t},t._id)})),Object(h.jsxs)("div",{className:"flex-row space-between",children:[Object(h.jsxs)("strong",{children:["Total: $",function(){var t=0;return c.cart.forEach((function(e){t+=e.price*e.purchaseQuantity})),t.toFixed(2)}()]}),ut.loggedIn()?Object(h.jsx)("button",{onClick:function(){var t=[];c.cart.forEach((function(e){for(var c=0;c<e.purchaseQuantity;c++)t.push(e._id)})),i({variables:{products:t}})},children:"Checkout"}):Object(h.jsx)("span",{children:" (log in to check out)"})]})]}):Object(h.jsxs)("h3",{children:[Object(h.jsx)("span",{role:"img","aria-label":"shocked",children:"\ud83d\ude31"}),"You haven't added anything to your cart yet!"]})]})):Object(h.jsx)("div",{className:"cart-closed",onClick:l,children:Object(h.jsx)("span",{role:"img","aria-label":"trash",children:"\ud83d\uded2"})})},ht=function(){return Object(h.jsxs)("div",{className:"container",children:[Object(h.jsx)(ct,{}),Object(h.jsx)(Ot,{})]})};var pt=function(){var t=q(),e=Object(x.a)(t,2),c=e[0],a=e[1],s=Object(l.n)().id,r=Object(n.useState)({}),j=Object(x.a)(r,2),d=j[0],u=j[1],b=Object(H.b)(Z),O=b.loading,p=b.data,m=c.products,v=c.cart;return Object(n.useEffect)((function(){m.length?u(m.find((function(t){return t._id===s}))):p?(a({type:k,products:p.products}),p.products.forEach((function(t){f("products","put",t)}))):O||f("products","get").then((function(t){a({type:k,products:t})}))}),[m,p,O,a,s]),Object(h.jsxs)(h.Fragment,{children:[d&&v?Object(h.jsxs)("div",{className:"detailedView my-1",children:[Object(h.jsx)(o.b,{to:"/products",children:"\u2190 Back to Products"}),Object(h.jsx)("h2",{className:"detailed-title",children:d.name}),Object(h.jsx)("div",{className:"detailedImgContainer",children:Object(h.jsx)("img",{className:"detailedImg",src:"/images/".concat(d.image),alt:d.name})}),Object(h.jsx)("div",{className:"description",children:Object(h.jsx)("p",{children:d.description})}),Object(h.jsxs)("div",{className:"detailedFooter",children:[Object(h.jsx)("strong",{children:"Price:"}),"$",d.price," ",Object(h.jsx)("button",{onClick:function(){var t=v.find((function(t){return t._id===s}));t?(a({type:T,_id:s,purchaseQuantity:parseInt(t.purchaseQuantity)+1}),f("cart","put",Object(i.a)(Object(i.a)({},t),{},{purchaseQuantity:parseInt(t.purchaseQuantity)+1}))):(a({type:C,product:Object(i.a)(Object(i.a)({},d),{},{purchaseQuantity:1})}),f("cart","put",Object(i.a)(Object(i.a)({},d),{},{purchaseQuantity:1})))},children:"Add to Cart"})]})]}):null,O?Object(h.jsx)("img",{src:et,alt:"loading"}):null,Object(h.jsx)(Ot,{})]})};var mt=function(t){var e=q(),c=Object(x.a)(e,2),n=c[0],a=c[1],s=t.image,r=t.name,l=t._id,j=t.price,d=t.quantity,u=n.cart;return Object(h.jsxs)("div",{className:"card px-1 py-1",children:[Object(h.jsxs)(o.b,{to:"/services/".concat(l),children:[Object(h.jsx)("img",{alt:r,src:"/images/".concat(s)}),Object(h.jsx)("p",{children:r})]}),Object(h.jsxs)("div",{className:"card-info",children:[Object(h.jsxs)("div",{children:[d," ",v("item",d)," in stock"]}),Object(h.jsxs)("span",{children:["$",j]})]}),Object(h.jsx)("div",{className:"card-btn",children:Object(h.jsx)("button",{onClick:function(){var e=u.find((function(t){return t._id===l}));e?(a({type:T,_id:l,purchaseQuantity:parseInt(e.purchaseQuantity)+1}),f("cart","put",Object(i.a)(Object(i.a)({},e),{},{purchaseQuantity:parseInt(e.purchaseQuantity)+1}))):(a({type:C,service:Object(i.a)(Object(i.a)({},t),{},{purchaseQuantity:1})}),f("cart","put",Object(i.a)(Object(i.a)({},t),{},{purchaseQuantity:1})))},children:"Add to cart"})})]})};var xt=function(){var t=q(),e=Object(x.a)(t,2),c=e[0],a=e[1],s=c.currentCategory,r=Object(H.b)(K),i=r.loading,o=r.data;return Object(n.useEffect)((function(){o?(console.log("data is here",o),a({type:S,services:o.services}),o.services.forEach((function(t){f("services","put",t)}))):i||(console.log("data",o),f("services","get").then((function(t){a({type:S,services:t})})))}),[o,i,a]),Object(h.jsxs)("div",{className:"my-2",children:[Object(h.jsx)("h2",{className:"section-title",children:"Our services:"}),c.services?Object(h.jsx)("div",{className:"flex-row",children:(s?c.services.filter((function(t){return t.category._id===s})):c.services).map((function(t){return Object(h.jsx)(mt,{_id:t._id,image:t.image,name:t.name,price:t.price,quantity:t.quantity},t._id)}))}):Object(h.jsx)("h3",{children:"You haven't added any services yet!"}),i?Object(h.jsx)("img",{src:et,alt:"loading"}):null]})},vt=function(){return Object(h.jsxs)("div",{className:"container",children:[Object(h.jsx)(xt,{}),Object(h.jsx)(Ot,{})]})};var ft,gt,yt,Nt=function(){var t=q(),e=Object(x.a)(t,2),c=e[0],a=e[1],s=Object(l.n)().id,r=Object(n.useState)({}),j=Object(x.a)(r,2),d=j[0],u=j[1],b=Object(H.b)(K),O=b.loading,p=b.data,m=c.services,v=c.cart;return Object(n.useEffect)((function(){m.length?u(m.find((function(t){return t._id===s}))):p?(a({type:S,services:p.services}),p.services.forEach((function(t){f("services","put",t)}))):O||f("services","get").then((function(t){a({type:S,services:t})}))}),[m,p,O,a,s]),Object(h.jsxs)(h.Fragment,{children:[d&&v?Object(h.jsxs)("div",{className:"detailedView my-1",children:[Object(h.jsx)(o.b,{to:"/services",children:"\u2190 Back to Services"}),Object(h.jsx)("h2",{className:"detailed-title",children:d.name}),Object(h.jsx)("div",{className:"detailedImgContainer",children:Object(h.jsx)("img",{className:"detailedImg",src:"/images/".concat(d.image),alt:d.name})}),Object(h.jsx)("div",{className:"description",children:Object(h.jsx)("p",{children:d.description})}),Object(h.jsxs)("div",{className:"detailedFooter",children:[Object(h.jsx)("strong",{children:"Price:"}),"$",d.price," ",Object(h.jsx)("button",{onClick:function(){var t=v.find((function(t){return t._id===s}));t?(a({type:T,_id:s,purchaseQuantity:parseInt(t.purchaseQuantity)+1}),f("cart","put",Object(i.a)(Object(i.a)({},t),{},{purchaseQuantity:parseInt(t.purchaseQuantity)+1}))):(a({type:C,service:Object(i.a)(Object(i.a)({},d),{},{purchaseQuantity:1})}),f("cart","put",Object(i.a)(Object(i.a)({},d),{},{purchaseQuantity:1})))},children:"Add to Cart"})]})]}):null,O?Object(h.jsx)("img",{src:et,alt:"loading"}):null,Object(h.jsx)(Ot,{})]})},wt=function(){return Object(h.jsx)("div",{children:Object(h.jsxs)(p,{children:[Object(h.jsx)("h1",{children:"404 Page Not Found"}),Object(h.jsx)("h1",{children:Object(h.jsx)("span",{role:"img","aria-label":"Face With Rolling Eyes Emoji",children:"\ud83d\ude44"})})]})})},_t=c(94),kt=Object(J.a)(ft||(ft=Object(z.a)(["\n\tmutation login($email: String!, $password: String!) {\n\t\tlogin(email: $email, password: $password) {\n\t\t\ttoken\n\t\t\tuser {\n\t\t\t\t_id\n\t\t\t}\n\t\t}\n\t}\n"]))),St=Object(J.a)(gt||(gt=Object(z.a)(["\n\tmutation addOrder($products: [ID]!, $services: [ID]!) {\n\t\taddOrder(products: $products, services: $services) {\n\t\t\tpurchaseDate\n\t\t\tproducts {\n\t\t\t\t_id\n\t\t\t\tname\n\t\t\t\tdescription\n\t\t\t\tprice\n\t\t\t\tquantity\n\t\t\t\tcategory {\n\t\t\t\t\tname\n\t\t\t\t}\n\t\t\t}\n\t\t\tservices {\n\t\t\t\t_id\n\t\t\t\tname\n\t\t\t\tdescription\n\t\t\t\tprice\n\t\t\t\tquantity\n\t\t\t\tcategory {\n\t\t\t\t\tname\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n"]))),Ct=Object(J.a)(yt||(yt=Object(z.a)(["\n\tmutation addUser(\n\t\t$firstName: String!\n\t\t$username: String!\n\t\t$email: String!\n\t\t$password: String!\n\t) {\n\t\taddUser(\n\t\t\tfirstName: $firstName\n\t\t\tusername: $username\n\t\t\temail: $email\n\t\t\tpassword: $password\n\t\t) {\n\t\t\ttoken\n\t\t\tuser {\n\t\t\t\t_id\n\t\t\t}\n\t\t}\n\t}\n"])));var Et=function(t){var e=Object(n.useState)({email:"",password:""}),c=Object(x.a)(e,2),a=c[0],s=c[1],r=Object(_t.a)(kt),l=Object(x.a)(r,2),j=l[0],d=l[1].error,u=function(){var t=Object(at.a)(Object(nt.a)().mark((function t(e){var c,n;return Object(nt.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.preventDefault(),t.prev=1,t.next=4,j({variables:{email:a.email,password:a.password}});case 4:c=t.sent,console.log(c),n=c.data.login.token,ut.login(n),t.next=13;break;case 10:t.prev=10,t.t0=t.catch(1),console.log(t.t0);case 13:case"end":return t.stop()}}),t,null,[[1,10]])})));return function(e){return t.apply(this,arguments)}}(),b=function(t){var e=t.target,c=e.name,n=e.value;s(Object(i.a)(Object(i.a)({},a),{},Object(m.a)({},c,n)))};return Object(h.jsxs)("div",{className:"detailedView",children:[Object(h.jsx)(o.b,{to:"/signup",children:"\u2190 Go to Signup"}),Object(h.jsxs)("form",{onSubmit:u,children:[Object(h.jsx)("div",{children:Object(h.jsx)("h2",{className:"form-header",children:"Login"})}),Object(h.jsxs)("div",{className:"text-input",children:[Object(h.jsx)("label",{className:"text-label",htmlFor:"email",children:"Email:"}),Object(h.jsx)("input",{className:"text-input",placeholder:"email@test.com",name:"email",type:"email",id:"email",onChange:b})]}),Object(h.jsxs)("div",{className:"text-input",children:[Object(h.jsx)("label",{className:"text-label",htmlFor:"pwd",children:"Password:"}),Object(h.jsx)("input",{className:"text-input",placeholder:"******",name:"password",type:"password",id:"pwd",onChange:b})]}),d?Object(h.jsx)("div",{children:Object(h.jsx)("p",{className:"error-text",children:"The provided credentials are incorrect"})}):null,Object(h.jsx)("button",{type:"submit",children:"Submit"})]})]})};var It=function(t){var e=Object(n.useState)({email:"",password:""}),c=Object(x.a)(e,2),a=c[0],s=c[1],r=Object(_t.a)(Ct),l=Object(x.a)(r,1)[0],j=function(){var t=Object(at.a)(Object(nt.a)().mark((function t(e){var c,n;return Object(nt.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.preventDefault(),t.next=3,l({variables:{username:a.username,email:a.email,password:a.password,firstName:a.firstName}});case 3:c=t.sent,console.log(c),n=c.data.addUser.token,ut.login(n);case 7:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),d=function(t){var e=t.target,c=e.name,n=e.value;s(Object(i.a)(Object(i.a)({},a),{},Object(m.a)({},c,n)))};return Object(h.jsxs)("div",{className:"detailedView",children:[Object(h.jsx)(o.b,{to:"/login",children:"\u2190 Go to Login"}),Object(h.jsxs)("form",{onSubmit:j,children:[Object(h.jsx)("div",{children:Object(h.jsx)("h2",{className:"form-header",children:"Signup"})}),Object(h.jsxs)("div",{className:"text-input",children:[Object(h.jsx)("label",{className:"text-label",htmlFor:"username",children:"Username:"}),Object(h.jsx)("input",{className:"text-input",placeholder:"Username",name:"username",type:"username",id:"username",onChange:d})]}),Object(h.jsxs)("div",{className:"text-input",children:[Object(h.jsx)("label",{className:"text-label",htmlFor:"firstName",children:"Name:"}),Object(h.jsx)("input",{className:"text-input",placeholder:"Your name",name:"firstName",type:"firstName",id:"firstName",onChange:d})]}),Object(h.jsxs)("div",{className:"text-input",children:[Object(h.jsx)("label",{className:"text-label",htmlFor:"email",children:"Email:"}),Object(h.jsx)("input",{className:"text-input",placeholder:"email@test.com",name:"email",type:"email",id:"email",onChange:d})]}),Object(h.jsxs)("div",{className:"text-input",children:[Object(h.jsx)("label",{className:"text-label",htmlFor:"pwd",children:"Password:"}),Object(h.jsx)("input",{className:"text-input",placeholder:"******",name:"password",type:"password",id:"pwd",onChange:d})]}),Object(h.jsx)("button",{type:"submit",children:"Submit"})]})]})};var Tt=function(){return Object(h.jsxs)("header",{className:"flex-row px-1",children:[Object(h.jsx)("h1",{children:Object(h.jsxs)(o.b,{to:"/",children:[Object(h.jsx)("span",{role:"img","aria-label":"shopping bag",children:"\ud83d\udecd\ufe0f"}),"MERN Spa"]})}),Object(h.jsx)("nav",{children:ut.loggedIn()?Object(h.jsxs)("ul",{className:"flex-row flex-end",children:[Object(h.jsx)("li",{className:"mx-1",children:Object(h.jsx)(o.b,{to:"/products",children:"Shop"})}),Object(h.jsx)("li",{className:"mx-1",children:Object(h.jsx)(o.b,{to:"/services",children:"Services"})}),Object(h.jsx)("li",{className:"mx-1",children:Object(h.jsx)("a",{href:"/",onClick:function(){return ut.logout()},children:"Logout"})})]}):Object(h.jsxs)("ul",{className:"flex-row",children:[Object(h.jsx)("li",{className:"mx-1",children:Object(h.jsx)(o.b,{to:"/products",children:"Shop"})}),Object(h.jsx)("li",{className:"mx-1",children:Object(h.jsx)(o.b,{to:"/services",children:"Services"})}),Object(h.jsx)("li",{className:"mx-1",children:Object(h.jsx)(o.b,{to:"/signup",children:"Signup"})}),Object(h.jsx)("li",{className:"mx-1",children:Object(h.jsx)(o.b,{to:"/login",children:"Login"})})]})})]})};var Qt=function(){var t=Object(_t.a)(St),e=Object(x.a)(t,1)[0];return Object(n.useEffect)((function(){function t(){return(t=Object(at.a)(Object(nt.a)().mark((function t(){var c,n,a,s,r,i,o;return Object(nt.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,f("cart","get");case 2:if(c=t.sent,n=c.map((function(t){return t._id})),a=c.map((function(t){return t._id})),!n.length){t.next=12;break}return t.next=8,e({variables:{products:n}});case 8:s=t.sent,r=s.data,r.addOrder.products.forEach((function(t){f("cart","delete",t)}));case 12:if(!a.length){t.next=19;break}return t.next=15,e({variables:{services:a}});case 15:i=t.sent,o=i.data,o.addOrder.cervices.forEach((function(t){f("cart","delete",t)}));case 19:setTimeout((function(){window.location.assign("/")}),3e3);case 20:case"end":return t.stop()}}),t)})))).apply(this,arguments)}!function(){t.apply(this,arguments)}()}),[e]),Object(h.jsx)("div",{children:Object(h.jsxs)(p,{children:[Object(h.jsx)("h1",{children:"Success!"}),Object(h.jsx)("h2",{children:"Thank you for your purchase!"}),Object(h.jsx)("h2",{children:"You will now be redirected to the home page"})]})})};var $t=function(){var t,e=Object(H.b)(tt).data;return e&&(t=e.user),Object(h.jsx)(h.Fragment,{children:Object(h.jsxs)("div",{className:"container my-1",children:[Object(h.jsx)(o.b,{to:"/",children:"\u2190 Back to Products"}),t?Object(h.jsxs)(h.Fragment,{children:[Object(h.jsxs)("h2",{children:["Order History for ",t.username]}),t.orders.map((function(t){return Object(h.jsxs)("div",{className:"my-2",children:[Object(h.jsx)("h3",{children:new Date(parseInt(t.purchaseDate)).toLocaleDateString()}),Object(h.jsxs)("div",{className:"flex-row",children:[t.products.map((function(t,e){var c=t._id,n=t.image,a=t.name,s=t.price;return Object(h.jsxs)("div",{className:"card px-1 py-1",children:[Object(h.jsxs)(o.b,{to:"/products/".concat(c),children:[Object(h.jsx)("img",{alt:a,src:"/images/".concat(n)}),Object(h.jsx)("p",{children:a})]}),Object(h.jsx)("div",{children:Object(h.jsxs)("span",{children:["$",s]})})]},e)})),t.services.map((function(t,e){var c=t._id,n=t.image,a=t.name,s=t.price;return Object(h.jsxs)("div",{className:"card px-1 py-1",children:[Object(h.jsxs)(o.b,{to:"/services/".concat(c),children:[Object(h.jsx)("img",{alt:a,src:"/images/".concat(n)}),Object(h.jsx)("p",{children:a})]}),Object(h.jsx)("div",{children:Object(h.jsxs)("span",{children:["$",s]})})]},e)}))]})]},t._id)}))]}):null]})})},At=Object(j.a)({uri:"/graphql"}),Dt=Object(O.a)((function(t,e){var c=e.headers,n=localStorage.getItem("id_token");return{headers:Object(i.a)(Object(i.a)({},c),{},{authorization:n?"Bearer ".concat(n):""})}})),Pt=new d.a({link:Dt.concat(At),cache:new u.a});var Rt=function(){return Object(h.jsx)(b.a,{client:Pt,children:Object(h.jsx)(o.a,{children:Object(h.jsx)("div",{children:Object(h.jsxs)(F,{children:[Object(h.jsx)(Tt,{}),Object(h.jsxs)(l.c,{children:[Object(h.jsx)(l.a,{path:"/",element:Object(h.jsx)(N,{})}),Object(h.jsx)(l.a,{path:"/login",element:Object(h.jsx)(Et,{})}),Object(h.jsx)(l.a,{path:"/signup",element:Object(h.jsx)(It,{})}),Object(h.jsx)(l.a,{path:"/success",element:Object(h.jsx)(Qt,{})}),Object(h.jsx)(l.a,{path:"/orderHistory",element:Object(h.jsx)($t,{})}),Object(h.jsx)(l.a,{path:"/products",element:Object(h.jsx)(ht,{})}),Object(h.jsx)(l.a,{path:"/products/:id",element:Object(h.jsx)(pt,{})}),Object(h.jsx)(l.a,{path:"/services",element:Object(h.jsx)(vt,{})}),Object(h.jsx)(l.a,{path:"/services/:id",element:Object(h.jsx)(Nt,{})}),Object(h.jsx)(l.a,{path:"*",element:Object(h.jsx)(wt,{})})]})]})})})})},Ft=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function qt(t,e){navigator.serviceWorker.register(t).then((function(t){t.onupdatefound=function(){var c=t.installing;null!=c&&(c.onstatechange=function(){"installed"===c.state&&(navigator.serviceWorker.controller?(console.log("New content is available and will be used when all tabs for this page are closed. See https://bit.ly/CRA-PWA."),e&&e.onUpdate&&e.onUpdate(t)):(console.log("Content is cached for offline use."),e&&e.onSuccess&&e.onSuccess(t)))})}})).catch((function(t){console.error("Error during service worker registration:",t)}))}r.a.render(Object(h.jsx)(a.a.StrictMode,{children:Object(h.jsx)(Rt,{})}),document.getElementById("root")),function(t){if("serviceWorker"in navigator){if(new URL("",window.location.href).origin!==window.location.origin)return;window.addEventListener("load",(function(){var e="".concat("","/service-worker.js");Ft?(!function(t,e){fetch(t,{headers:{"Service-Worker":"script"}}).then((function(c){var n=c.headers.get("content-type");404===c.status||null!=n&&-1===n.indexOf("javascript")?navigator.serviceWorker.ready.then((function(t){t.unregister().then((function(){window.location.reload()}))})):qt(t,e)})).catch((function(){console.log("No internet connection found. App is running in offline mode.")}))}(e,t),navigator.serviceWorker.ready.then((function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://bit.ly/CRA-PWA")}))):qt(e,t)}))}}()}},[[86,1,2]]]);
//# sourceMappingURL=main.26852123.chunk.js.map